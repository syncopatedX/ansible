---
# Base system configuration - refactored to use decomposed roles

- name: Load distribution-specific variables
  include_vars: "{{ ansible_os_family }}.yml"
  tags: ["packages"]

# Repository setup
- name: Configure system repositories
  include_role:
    name: repository-manager
  tags: ["repos"]

# Core system configuration
- name: Configure basic system settings
  include_role:
    name: system-base
  tags: ["system"]

# User account management
- name: Setup user accounts
  include_role:
    name: user-manager
  tags: ["users"]

# Install essential packages
- name: Install base packages
  include_role:
    name: package-manager
  vars:
    packages: "{{ base_packages }}"
  tags: ["packages"]