---
# Base system configuration - refactored to use decomposed roles

- name: Load distribution-specific variables
  ansible.builtin.include_vars: "{{ ansible_os_family }}.yml"
  tags: ["packages"]

# Note: repository-manager, system-base, and user-manager roles
# are executed via meta dependencies in meta/main.yml

# Install essential packages
- name: Install base packages on Arch Linux
  pacman:
    name: "{{ packages__base }}"
    state: present
  become: true
  when:
    - ansible_os_family == "Archlinux"
    - packages__base is defined
  tags: ["packages"]

- name: Install base packages on Rocky Linux/RedHat
  ansible.builtin.dnf:
    name: "{{ packages__base }}"
    state: present
  become: true
  when:
    - ansible_os_family == "RedHat"
    - packages__base is defined
  tags: ["packages"]
