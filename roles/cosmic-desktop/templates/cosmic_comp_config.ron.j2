// COSMIC Compositor Configuration
// Generated by Ansible - cosmic-desktop role

(
{% if cosmic_comp_settings is defined and cosmic_comp_settings %}
    // Workspace configuration
    {% if cosmic_comp_settings.workspaces is defined %}
    workspaces: {{ cosmic_comp_settings.workspaces | default(4) }},
    {% endif %}

    // Keyboard shortcuts
    {% if cosmic_comp_settings.shortcuts is defined %}
    shortcuts: {
    {% for key, command in cosmic_comp_settings.shortcuts.items() %}
        "{{ key }}": "{{ command }}",
    {% endfor %}
    },
    {% endif %}

    // Window management
    {% if cosmic_comp_settings.window_management is defined %}
    window_management: {
    {% if cosmic_comp_settings.window_management.focus_follows_mouse is defined %}
        focus_follows_mouse: {{ cosmic_comp_settings.window_management.focus_follows_mouse | lower }},
    {% endif %}
    {% if cosmic_comp_settings.window_management.auto_raise is defined %}
        auto_raise: {{ cosmic_comp_settings.window_management.auto_raise | lower }},
    {% endif %}
    {% if cosmic_comp_settings.window_management.click_to_focus is defined %}
        click_to_focus: {{ cosmic_comp_settings.window_management.click_to_focus | lower }},
    {% endif %}
    },
    {% endif %}

    // Display settings
    {% if cosmic_comp_settings.display is defined %}
    display: {
    {% if cosmic_comp_settings.display.scale is defined %}
        scale: {{ cosmic_comp_settings.display.scale }},
    {% endif %}
    {% if cosmic_comp_settings.display.refresh_rate is defined %}
        refresh_rate: {{ cosmic_comp_settings.display.refresh_rate }},
    {% endif %}
    },
    {% endif %}

    // Animation settings
    {% if cosmic_comp_settings.animations is defined %}
    animations: {
    {% if cosmic_comp_settings.animations.enable is defined %}
        enable: {{ cosmic_comp_settings.animations.enable | lower }},
    {% endif %}
    {% if cosmic_comp_settings.animations.duration is defined %}
        duration: {{ cosmic_comp_settings.animations.duration }},
    {% endif %}
    },
    {% endif %}

{% else %}
    // Default COSMIC compositor configuration
    workspaces: 4,
    shortcuts: {
        "Super+Return": "cosmic-terminal",
        "Super+Space": "cosmic-launcher",
        "Super+q": "close",
        "Super+1": "workspace_1",
        "Super+2": "workspace_2", 
        "Super+3": "workspace_3",
        "Super+4": "workspace_4",
    },
    window_management: {
        focus_follows_mouse: false,
        click_to_focus: true,
        auto_raise: false,
    },
    animations: {
        enable: true,
        duration: 250,
    },
{% endif %}
)