---
# System Base configuration tasks

- name: Set timezone
  ansible.builtin.command: "timedatectl set-timezone {{ timezone }}"
  register: timezone_result
  changed_when: timezone_result.rc == 0
  failed_when: timezone_result.rc != 0
  tags: ["timezone"]

- name: Set locale
  ansible.builtin.copy:
    content: "LANG={{ locale }}\n"
    dest: /etc/locale.conf
    mode: "0644"
    owner: root
    group: root
    backup: true
  tags: ["locale"]

- name: Set keymap
  ansible.builtin.copy:
    content: "KEYMAP={{ keymap }}\n" 
    dest: /etc/vconsole.conf
    mode: "0644"
    owner: root
    group: root
    backup: true
  tags: ["keymap"]